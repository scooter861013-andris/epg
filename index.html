<!DOCTYPE html>
<html lang="hu">
<head>
  <meta charset="UTF-8">
  <title>Id≈ëj√°r√°s</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: monospace;
      background: #ffffff;
      color: #000;
      padding: 16px;
      white-space: pre-line;
    }
  </style>
</head>
<body id="out">
Bet√∂lt√©s...
<script>
const lat = 47.6881;     // Hajd√∫hadh√°z
const lon = 21.6601;

const weatherMap = {
  0: ["Tiszta √©gbolt", "‚òÄÔ∏è"],
  1: ["T√∂bbnyire der√ºlt", "üå§Ô∏è"],
  2: ["R√©szben felh≈ës", "‚õÖ"],
  3: ["Borult", "‚òÅÔ∏è"],
  45: ["K√∂d", "üå´Ô∏è"],
  48: ["Z√∫zmar√°s k√∂d", "üå´Ô∏è"],
  51: ["Szit√°l√°s", "üå¶Ô∏è"],
  61: ["Es≈ë", "üåßÔ∏è"],
  71: ["Havaz√°s", "‚ùÑÔ∏è"],
  80: ["Z√°por", "üåßÔ∏è"],
  95: ["Zivatar", "‚õàÔ∏è"]
};

function fmtDate(d) {
  return d.toLocaleDateString("hu-HU", { weekday: "short" });
}

fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true&daily=weathercode,temperature_2m_min,temperature_2m_max&timezone=Europe/Budapest`)
.then(r => r.json())
.then(d => {
  const now = d.current_weather;
  const mapNow = weatherMap[now.weathercode] || ["Ismeretlen", "‚ùì"];

  let txt = `[${now.time.slice(11,16)}]\n`;
  txt += `Most: ${now.temperature} ¬∞C\n`;
  txt += `Id≈ë: ${mapNow[0]} ${mapNow[1]}\n\n`;
  txt += `El≈ërejelz√©s:\n`;

  for (let i = 1; i <= 3; i++) {
    const map = weatherMap[d.daily.weathercode[i]] || ["?", "‚ùì"];
    txt += `${fmtDate(new Date(d.daily.time[i]))}  `;
    txt += `${Math.round(d.daily.temperature_2m_min[i])} / `;
    txt += `${Math.round(d.daily.temperature_2m_max[i])} `;
    txt += `${map[1]}\n`;
  }

  document.getElementById("out").textContent = txt;
})
.catch(() => {
  document.getElementById("out").textContent = "Hiba az id≈ëj√°r√°s bet√∂lt√©sekor.";
});
</script>
</body>
</html>
